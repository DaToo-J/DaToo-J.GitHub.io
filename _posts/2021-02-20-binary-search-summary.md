---
layout: single
classes: wide
toc: true
toc_label: "æœ¬æ–‡å†…å®¹"
toc_icon: "list"
sidebar:
  nav: "main"
comments: true

tags: äºŒåˆ†æœç´¢ æ€»ç»“
title: äºŒåˆ†æœç´¢æ€»ç»“
excerpt: äºŒåˆ†æœç´¢çš„åŸºæœ¬æ¦‚å¿µã€ä½¿ç”¨åœºæ™¯ã€æ¨¡ç‰ˆä½¿ç”¨ã€ä»¥åŠç›¸å…³é¢˜ç›®çš„æ€»ç»“
---

> å‚è€ƒ leetbook

## ä¸€ã€æ¦‚è¿°

1. äºŒåˆ†æŸ¥æ‰¾æ˜¯ä¸€ç§ã€Œæ¯æ¬¡éƒ½å°†æŸ¥æ‰¾ç©ºé—´ä¸€åˆ†ä¸ºäºŒã€çš„ç®—æ³•ï¼Œå› æ­¤å…¶æ—¶é—´å¤æ‚åº¦ä¸º `O(log n)`

2. é€‚ç”¨äºï¼šæŸ¥æ‰¾é›†åˆä¸­çš„ç´¢å¼•æˆ–å…ƒç´ æ—¶ï¼Œéƒ½å¯ä»¥è€ƒè™‘äºŒåˆ†æŸ¥æ‰¾

3. ä¸‰ä¸ªä¸»è¦éƒ¨åˆ†ç»„æˆï¼š
   
   1. é¢„å¤„ç†ï¼š å¦‚æœé›†åˆæœªæ’åºï¼Œåˆ™éœ€å…ˆè¿›è¡Œæ’åºã€‚
   2. äºŒåˆ†æŸ¥æ‰¾ï¼š ä½¿ç”¨å¾ªç¯æˆ–é€’å½’åœ¨æ¯æ¬¡æ¯”è¾ƒåå°†æŸ¥æ‰¾ç©ºé—´åˆ’åˆ†ä¸ºä¸¤åŠã€‚
   3. åå¤„ç†ï¼š åœ¨å‰©ä½™ç©ºé—´ä¸­ç¡®å®šå¯è¡Œçš„å€™é€‰è€…ã€‚

## äºŒã€æ¨¡ç‰ˆ

### 2.1 æ¨¡ç‰ˆ I

> äºŒåˆ†æŸ¥æ‰¾çš„æœ€åŸºç¡€å’Œæœ€åŸºæœ¬çš„å½¢å¼ã€‚

1. æ¨¡ç‰ˆç‰¹ç‚¹ï¼š
   2. æŸ¥æ‰¾æ¡ä»¶å¯ä»¥åœ¨ä¸ä¸å…ƒç´ çš„ä¸¤ä¾§è¿›è¡Œæ¯”è¾ƒçš„æƒ…å†µä¸‹ç¡®å®šï¼ˆæˆ–ä½¿ç”¨å®ƒå‘¨å›´çš„ç‰¹å®šå…ƒç´ ï¼‰ã€‚
   3. ä¸éœ€è¦åå¤„ç†ï¼šå› ä¸ºæ¯ä¸€æ­¥ä¸­éƒ½æ£€æŸ¥æ˜¯å¦æ‰¾åˆ°äº†å…ƒç´ ã€‚å¦‚æœåˆ°è¾¾æœ«å°¾ï¼Œåˆ™çŸ¥é“æœªæ‰¾åˆ°è¯¥å…ƒç´ ã€‚

```python
def binarySearch(nums, target):
    if len(nums) == 0:
        return -1
    
    # åˆå§‹æ¡ä»¶
    left, right = 0, len(nums) - 1
    
    # ç»ˆæ­¢æ¡ä»¶ï¼šleft > right æ—¶å°±ä¼šè·³å‡ºå¾ªç¯
    while left <= right:
        mid = (left + right) // 2
        # æ£€æŸ¥æ˜¯å¦æ‰¾åˆ°å…ƒç´ 
        if nums[mid] == target:
            return mid
        # æ²¡æ‰¾åˆ°å°±ç§»åŠ¨æŒ‡é’ˆ
        # å‘å³ç§»åŠ¨
        elif nums[mid] < target:
            left = mid + 1
        # å‘å·¦ç§»åŠ¨
        else:
            right = mid - 1
    
    # ä¸éœ€è¦åå¤„ç†
    return -1
```

### 2.2 æ¨¡ç‰ˆ II

> äºŒåˆ†æŸ¥æ‰¾çš„é«˜çº§æ¨¡æ¿ã€‚

1. æ¨¡ç‰ˆç‰¹ç‚¹ï¼š
   1. ç”¨äºæŸ¥æ‰¾æ•°ç»„ä¸­ã€Œå½“å‰ç´¢å¼•åŠå…¶ç›´æ¥å³é‚»å±…ç´¢å¼•ã€çš„å…ƒç´ æˆ–æ¡ä»¶ã€‚
   2. æŸ¥æ‰¾æ¡ä»¶éœ€è¦è®¿é—®ã€Œå…ƒç´ çš„ç›´æ¥å³é‚»å±…ã€ã€‚
   3. ä½¿ç”¨ã€Œå…ƒç´ çš„å³é‚»å±…ã€æ¥ç¡®å®šå®ƒæ˜¯å‘å·¦è¿˜æ˜¯å‘å³ã€‚
   4. ä¿è¯æŸ¥æ‰¾ç©ºé—´åœ¨æ¯ä¸€æ­¥ä¸­è‡³å°‘æœ‰ 2 ä¸ªå…ƒç´ ã€‚
   5. éœ€è¦è¿›è¡Œåå¤„ç†ï¼šå½“å‰©ä¸‹ 1 ä¸ªå…ƒç´ æ—¶ï¼Œå¾ªç¯ç»“æŸã€‚Â éœ€åˆ¤æ–­å…¶ä½™å…ƒç´ æ˜¯å¦ç¬¦åˆæ¡ä»¶ã€‚


```python
def binarySearch(nums, target):
    if len(nums) == 0:
        return -1

    # åˆå§‹æ¡ä»¶
    left, right = 0, len(nums)

    # ç»ˆæ­¢æ¡ä»¶ï¼šleft == right æ—¶å°±ä¼šè·³å‡ºå¾ªç¯
    while left < right:
        mid = (left + right) // 2
        if nums[mid] == target:
            return mid
        # å‘å³ç§»åŠ¨
        elif nums[mid] < target:
            left = mid + 1
        # å‘å·¦ç§»åŠ¨
        # å³é‚»å±…
        else:
            right = mid

    # éœ€è¦åå¤„ç†ï¼šæ­¤æ—¶å‰© 1 ä¸ªå…ƒç´ 
    # éœ€åˆ¤æ–­å‰©ä½™å…ƒç´ æ˜¯å¦ç¬¦åˆæ¡ä»¶
    if left != len(nums) and nums[left] == target:
        return left
    return -1
```

### 2.3 æ¨¡ç‰ˆ III

> ä¹Ÿæ¯”ç¬¬ä¸€ä¸ªæ¨¡ç‰ˆé«˜çº§ä¸€ç‚¹å„¿

1. æ¨¡ç‰ˆç‰¹ç‚¹ï¼š
   1. ç”¨äºæŸ¥æ‰¾ã€Œå½“å‰ç´¢å¼•åŠå…¶åœ¨æ•°ç»„ä¸­çš„ç›´æ¥å·¦å³é‚»å±…ç´¢å¼•ã€çš„å…ƒç´ æˆ–æ¡ä»¶ã€‚
   2. æŸ¥æ‰¾æ¡ä»¶éœ€è¦è®¿é—®ã€Œå…ƒç´ çš„ç›´æ¥å·¦å³é‚»å±…ã€ã€‚
   3. ä½¿ç”¨ã€Œå…ƒç´ çš„é‚»å±…ã€æ¥ç¡®å®šå®ƒæ˜¯å‘å³è¿˜æ˜¯å‘å·¦ã€‚
   4. ä¿è¯æŸ¥æ‰¾ç©ºé—´åœ¨æ¯ä¸ªæ­¥ä¸­è‡³å°‘æœ‰ 3 ä¸ªå…ƒç´ ã€‚
   5. éœ€è¦è¿›è¡Œåå¤„ç†ï¼šå½“å‰©ä¸‹ 2 ä¸ªå…ƒç´ æ—¶ï¼Œå¾ªç¯ç»“æŸã€‚éœ€åˆ¤æ–­å…¶ä½™å…ƒç´ æ˜¯å¦ç¬¦åˆæ¡ä»¶ã€‚

```python
def binarySearch(nums, target):
    if len(nums) == 0:
        return -1

    # åˆå§‹æ¡ä»¶
    left, right = 0, len(nums) - 1

    # ç»ˆæ­¢æ¡ä»¶ï¼šleft + 1 == right æ—¶å°±ä¼šè·³å‡ºå¾ªç¯
    while left + 1 < right:
        mid = (left + right) // 2
        if nums[mid] == target:
            return mid
        # å‘å³ç§»åŠ¨
        elif nums[mid] < target:
            left = mid
        # å‘å·¦ç§»åŠ¨
        else:
            right = mid

    # éœ€è¦åå¤„ç†ï¼šæ­¤æ—¶å‰© 2 ä¸ªå…ƒç´ 
    # éœ€åˆ¤æ–­å‰©ä½™å…ƒç´ æ˜¯å¦ç¬¦åˆæ¡ä»¶
    if nums[left] == target: return left
    if nums[right] == target: return right
    return -1
```

### 2.4 æ¨¡ç‰ˆå¯¹æ¯”

![binary-search]({{ "./assets/images/binary-search.jpg" | absolute_url }})
 
## ä¸‰ã€ç›¸å…³æ¨¡å—

> python æ¨¡å— [`bisect`ï¼ˆæ•°ç»„äºŒåˆ†æŸ¥æ‰¾ç®—æ³•ï¼‰](https://docs.python.org/zh-cn/3.6/library/bisect.html) å¯ç”¨äº **ç»´æŠ¤æœ‰åºåˆ—è¡¨**ã€‚`bisection` æ˜¯ä¸€åˆ†ä¸ºäºŒçš„æ„æ€ã€‚
> 
> `bisect` çš„æ“ä½œæ˜¯åŸºäºäºŒåˆ†æœç´¢æ¥å®ç°çš„ï¼Œç›¸æ¯”äºå¾ªç¯å’Œé€’å½’çš„äºŒåˆ†æ€§èƒ½æ›´å¥½ä¸€äº›ã€‚
> 
> `bisect` ä¸»è¦æ“ä½œå¯åˆ†ä¸ºä¸¤ç±»ï¼š `bisect*`ï¼ˆæœç´¢ï¼‰å’Œ `insort*`ï¼ˆæ’å…¥ï¼‰


1. `bisect*`ï¼ˆæœç´¢ï¼‰ï¼š
   1. `bisect.bisect_left(nums, item, lo=0, hi=len(nums))`ï¼š
      1. `nums`ï¼šå¾…æœç´¢çš„ **æœ‰åºåˆ—è¡¨**
      2. `item`ï¼šå¾…æœç´¢çš„å…ƒç´ 
      3. å‡½æ•°ä½œç”¨ï¼šå¦‚æœè¦åœ¨æœ‰åºåˆ—è¡¨ `nums` ä¸­æ’å…¥å…ƒç´  `item`ï¼Œåº”è¯¥æ’å…¥åˆ°å“ªä¸ªä½ç½®ï¼Œè¯¥å‡½æ•°ä¼šè¿”å›è¿™ä¸ªä½ç½®ç´¢å¼•ã€‚å¦‚æœ `nums` ä¸­å­˜åœ¨ `item`ï¼Œåˆ™è¿”å›å…¶å·¦è¾¹çš„ç´¢å¼•ã€‚
      4. `lo, hi`ï¼šæŒ‡å®šæœ‰åºåˆ—è¡¨çš„æœç´¢åŒºé—´ï¼Œé»˜è®¤æ˜¯æ•´ä¸ªåˆ—è¡¨ã€‚
    2. `bisect.bisect_right(nums, item, lo=0, hi=len(nums))`ï¼šå’Œ `bisect_left()` ç›¸ä¼¼ï¼Œå¦‚æœ `item` å·²å­˜åœ¨ï¼Œåˆ™è¿”å›å…¶å³è¾¹çš„ç´¢å¼•ã€‚
    3. `bisect.bisect(nums, item, lo=0, hi=len(nums))`ï¼šå’Œ `bisect_left()` ç›¸ä¼¼ï¼Œå¦‚æœ `item` å·²å­˜åœ¨ï¼Œåˆ™è¿”å›å…¶å³è¾¹çš„ç´¢å¼•ã€‚

2. `insort*`ï¼ˆæ’å…¥ï¼‰ï¼š
   1. `bisect.insort_left(nums, item, lo=0, hi=len(nums))`ï¼š`bisect_left()` äºŒåˆ†æœç´¢åï¼Œå†æ’å…¥ã€‚`nums.insert(bisect.bisect_left(nums, item, lo, hi), item)` çš„æ•ˆæœç›¸åŒã€‚
   2. `bisect.insort_right(nums, item, lo=0, hi=len(nums))`ï¼šåŒ `nums.insert(bisect.bisect_right(nums, item, lo, hi), item)`
   3. `bisect.insort(nums, item, lo=0, hi=len(nums))`ï¼šåŒ `nums.insert(bisect.bisect(nums, item, lo, hi), item)`

3. ğŸŒ°ï¼š
    ```python
    import bisect
    import random

    nums = []
    print("item idx  nums")
    print("---- ---  ----")
    for _ in range(10):
        item = random.randint(1, 100)

        # é€šè¿‡äºŒåˆ†æœç´¢è·å– item æ’å…¥åˆ° nums çš„ç´¢å¼•
        idx = bisect.bisect_left(nums, item)
        # æ’å…¥ item
        bisect.insort_left(nums, item)

        print("%4d %3d " % (item, idx), nums)
    ```
    ç»“æœè¾“å‡ºï¼š
    ```  
    item idx  nums
    ---- ---  ----
    42   0  [42]
    24   0  [24, 42]
    42   1  [24, 42, 42]
    75   3  [24, 42, 42, 75]
    59   3  [24, 42, 42, 59, 75]
    68   4  [24, 42, 42, 59, 68, 75]
    31   1  [24, 31, 42, 42, 59, 68, 75]
    96   7  [24, 31, 42, 42, 59, 68, 75, 96]
    57   4  [24, 31, 42, 42, 57, 59, 68, 75, 96]
    91   8  [24, 31, 42, 42, 57, 59, 68, 75, 91, 96]
    ```

4. è¿˜å¯ç”¨äºåˆ†æ•°ç­‰çº§çš„è®¡ç®—ï¼š
    ```python
    def getGrade(score, breakpoints=[60, 70, 80, 90], grades='FDCBA'):
        i = bisect.bisect(breakpoints, score)
        return grades[i]

    [getGrade(score) for score in [24, 31, 42, 42, 57, 59, 68, 75, 91, 96]]
    # ['F', 'F', 'F', 'F', 'F', 'F', 'D', 'C', 'A', 'A']
    ```
5. åœ¨ 209 é¢˜ [é•¿åº¦æœ€å°çš„å­æ•°ç»„]({% link _posts/2021-03-05-minimum-size-subarray-sum.md %}) ä¸­æœ‰ä½¿ç”¨åˆ° `bisect` æ¨¡å—ã€‚



## å››ã€ç›¸å…³é¢˜ç›®



   | No  | Problem                                    | Difficulty | Link                                                                                              | Solution                                                                                        | Comment                                                                      |
   | --- | ------------------------------------------ | ---------- | ------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------- |
   | 69  | x çš„å¹³æ–¹æ ¹                                 | ç®€å•       | [é¢˜ç›®](https://leetcode-cn.com/problems/sqrtx/)                                                   | [é¢˜è§£]({% link _posts/2021-02-23-sqrt-x.md %})                                                  | äºŒåˆ†æœç´¢çš„å…¥é—¨é¢˜ç›®ï¼Œä½¿ç”¨ã€Œæ¨¡ç‰ˆ Iã€å³å¯                                       |
   | 33  | æœç´¢æ—‹è½¬æ’åºæ•°ç»„                           | ä¸­ç­‰       | [é¢˜ç›®](https://leetcode-cn.com/problems/search-in-rotated-sorted-array/)                          | [é¢˜è§£]({% link _posts/2021-02-23-search-in-rotated-sorted-array.md %})                          | æ¯”ã€Œx çš„å¹³æ–¹æ ¹ã€æ›´è¿›é˜¶ä¸€ç‚¹ï¼ŒäºŒåˆ†æœç´¢çš„å¦ä¸€ç§ä½¿ç”¨åœºæ™¯ã€‚åŒæ ·ä½¿ç”¨ã€Œæ¨¡ç‰ˆ Iã€å³å¯ |
   | 209 | é•¿åº¦æœ€å°çš„å­æ•°ç»„ | ä¸­ç­‰       | [é¢˜ç›®](https://leetcode-cn.com/problems/minimum-size-subarray-sum/) | [é¢˜è§£]({% link _posts/2021-03-05-minimum-size-subarray-sum.md %}) | æ—¢å¯ä»¥ç”¨åŒæŒ‡é’ˆçš„æ»‘åŠ¨çª—å£ï¼Œåˆå¯ä»¥ç”¨äºŒåˆ†æ³•ï¼Œæ˜¯ä¸€é“å¾ˆå¥½çš„ç»ƒä¹ é¢˜ã€‚ä½¿ç”¨åˆ°äº† `bisect` æ¨¡å—ã€‚ |
   | 278 | ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬                           | ç®€å•       | [é¢˜ç›®](https://leetcode-cn.com/problems/first-bad-version/)                                       | [é¢˜è§£]({% link _posts/2021-02-24-first-bad-version.md %})                                       | äºŒåˆ†æœç´¢ã€Œæ¨¡ç‰ˆ IIã€çš„å…¥é—¨é¢˜ç›®                                                |
   | 162 | å¯»æ‰¾å³°å€¼                                   | ä¸­ç­‰       | [é¢˜ç›®](https://leetcode-cn.com/problems/find-peak-element/)                                       | [é¢˜è§£]({% link _posts/2021-02-24-find-peak-element.md %})                                       | äºŒåˆ†æœç´¢ã€Œæ¨¡ç‰ˆ IIã€çš„è¿›é˜¶é¢˜ç›®ã€‚äºŒåˆ†æœç´¢ä¸ä»…ä»…å±€é™äºå·¦å³æŒ‡é’ˆä¸ä¸­é—´å€¼çš„æ¯”è¾ƒã€‚  |
   | 34  | åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½® | ä¸­ç­‰       | [é¢˜ç›®](https://leetcode-cn.com/problems/find-first-and-last-position-of-element-in-sorted-array/) | [é¢˜è§£]({% link _posts/2021-02-25-find-first-and-last-position-of-element-in-sorted-array.md %}) | äºŒåˆ†æœç´¢ã€Œæ¨¡ç‰ˆ IIIã€å’Œã€Œæ¨¡ç‰ˆ Iã€éƒ½å¯ä»¥ä½¿ç”¨çš„è¿›é˜¶é¢˜ç›®ã€‚ä¸åŒçš„è§£é¢˜æ€è·¯ä½¿ç”¨ä¸åŒçš„æ¨¡ç‰ˆã€‚                                             |
   | 658  | æ‰¾åˆ° K ä¸ªæœ€æ¥è¿‘çš„å…ƒç´  | ä¸­ç­‰       | [é¢˜ç›®](https://leetcode-cn.com/problems/find-k-closest-elements/) | [é¢˜è§£]({% link _posts/2021-02-25-find-k-closest-elements.md %}) | ç”¨åˆ°äº†ã€Œæ¨¡ç‰ˆ Iã€ï¼Œä½†åˆä¸å±€é™äº[äºŒåˆ†æœç´¢æ€»ç»“]({% link _posts/2021-02-20-binary-search-summary.md %}) é‡Œçš„æ¨¡ç‰ˆã€‚åœ¨æœç´¢æ—¶è¿˜éœ€è¦æ ¹æ®è§£é¢˜æ€è·¯é­”æ”¹æ¨¡ç‰ˆã€‚                                             |