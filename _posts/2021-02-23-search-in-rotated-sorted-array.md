---
layout: single
classes: wide
toc: true
toc_label: "æœ¬æ–‡å†…å®¹"
toc_icon: "list"
sidebar:
  nav: "main"
comments: true

tags: äºŒåˆ†æœç´¢
title: 33 æœç´¢æ—‹è½¬æ’åºæ•°ç»„
excerpt: è¿™é“é¢˜å¾ˆç»å…¸ï¼Œä¸çŸ¥é“è¯´ä»€ä¹ˆå¥½äº† ğŸ¤ª
---

## é¢˜ç›®

> é¢˜ç›®é“¾æ¥ï¼š[33. æœç´¢æ—‹è½¬æ’åºæ•°ç»„](https://leetcode-cn.com/problems/search-in-rotated-sorted-array/)

æ•´æ•°æ•°ç»„ nums æŒ‰å‡åºæ’åˆ—ï¼Œæ•°ç»„ä¸­çš„å€¼ äº’ä¸ç›¸åŒ ã€‚

åœ¨ä¼ é€’ç»™å‡½æ•°ä¹‹å‰ï¼Œnums åœ¨é¢„å…ˆæœªçŸ¥çš„æŸä¸ªä¸‹æ ‡ kï¼ˆ0 <= k < nums.lengthï¼‰ä¸Šè¿›è¡Œäº† æ—‹è½¬ï¼Œä½¿æ•°ç»„å˜ä¸º [nums[k], nums[k+1], ..., nums[n-1], nums[0], nums[1], ..., nums[k-1]]ï¼ˆä¸‹æ ‡ ä» 0 å¼€å§‹ è®¡æ•°ï¼‰ã€‚ä¾‹å¦‚ï¼Œ [0,1,2,4,5,6,7] åœ¨ä¸‹æ ‡ 3 å¤„ç»æ—‹è½¬åå¯èƒ½å˜ä¸ºÂ [4,5,6,7,0,1,2] ã€‚

ç»™ä½  æ—‹è½¬å çš„æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° target ï¼Œå¦‚æœ nums ä¸­å­˜åœ¨è¿™ä¸ªç›®æ ‡å€¼ target ï¼Œåˆ™è¿”å›å®ƒçš„ç´¢å¼•ï¼Œå¦åˆ™è¿”å›Â -1Â ã€‚

ç¤ºä¾‹ 1ï¼š

    è¾“å…¥ï¼šnums = [4,5,6,7,0,1,2], target = 0
    è¾“å‡ºï¼š4

ç¤ºä¾‹Â 2ï¼š

    è¾“å…¥ï¼šnums = [4,5,6,7,0,1,2], target = 3
    è¾“å‡ºï¼š-1

ç¤ºä¾‹ 3ï¼š

    è¾“å…¥ï¼šnums = [1], target = 0
    è¾“å‡ºï¼š-1

æç¤ºï¼š

    1 <= nums.length <= 5000
    -10^4 <= nums[i] <= 10^4
    nums ä¸­çš„æ¯ä¸ªå€¼éƒ½ ç‹¬ä¸€æ— äºŒ
    nums è‚¯å®šä¼šåœ¨æŸä¸ªç‚¹ä¸Šæ—‹è½¬
    -10^4 <= target <= 10^4
    
è¿›é˜¶ï¼šä½ å¯ä»¥è®¾è®¡ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ä¸º O(log n) çš„è§£å†³æ–¹æ¡ˆå—ï¼Ÿ


## æ€è·¯ 

> æ¬¢è¿è®¿é—®æˆ‘åœ¨ [LeetCode ä¸Šçš„é¢˜è§£](https://leetcode-cn.com/problems/search-in-rotated-sorted-array/solution/3-zhang-tu-dai-ni-tong-guo-ci-ti-by-dato-mw50/)
> 
> æœ¬é¢˜é‡‡ç”¨ [äºŒåˆ†æœç´¢æ€»ç»“]({% link _posts/2021-02-20-binary-search-summary.md %}) é‡Œçš„ã€Œæ¨¡ç‰ˆ Iã€å®ç°         

1. æ ¹æ®ã€Œæ—‹è½¬ç‚¹ã€çš„ä½ç½®ï¼Œå¯åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼šé å·¦æˆ–é å³ã€‚ ä¸ç®¡æ€ä¹ˆæ—‹è½¬ï¼Œæ—‹è½¬åçš„æ•°ç»„éƒ½æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š
   1. `è“è‰²æ•°ç»„çš„æœ€å°å€¼ > é»„è‰²æ•°ç»„çš„æœ€å¤§å€¼`ï¼Œå³ `æ‰€æœ‰è“è‰²æ•°ç»„çš„å…ƒç´  > æ‰€æœ‰é»„è‰²æ•°ç»„çš„å…ƒç´ `ï¼›
   2. è“è‰²æ•°ç»„é•¿åº¦å’Œé»„è‰²æ•°ç»„é•¿åº¦å­°é•¿å­°çŸ­ï¼Œæ˜¯åŠ¨æ€å˜åŒ–çš„ï¼Œå–å†³äºæŒ‡é’ˆçš„ç§»åŠ¨ã€‚
   ![rotated-array-1]({{ "./assets/images/rotated-array-1.jpeg" | absolute_url }}){:height="75%" :width="75%"}

2. å†æ ¹æ®ã€Œæ•´ä½“æ•°ç»„çš„ä¸­é—´å€¼ã€å’Œã€Œè“é»„é•¿åº¦å¯¹æ¯”ã€ï¼Œ`target` çš„è½ç‚¹å¯åˆ†ä¸ºä»¥ä¸‹ 6 ç§æƒ…å†µï¼š
   1. å½“æ—‹è½¬ç‚¹é å³æ—¶ï¼šï¼ˆ`target` å¯è½åœ¨ â‘ ~â‘¢ï¼‰
      1. å¦‚æœ `target` è½åœ¨äº† `1` åŒºï¼šåˆ™ `nums[mid] > target`ã€‚å› ä¸º `nums[mid]` å’Œ `target` å±äºåŒä¸€æ•°ç»„ï¼Œ`target` æ›´é å·¦ï¼Œå°±æ›´å°ã€‚
      2. å¦‚æœ `target` è½åœ¨äº† `2` åŒºï¼šåˆ™ `nums[mid] < target`ã€‚å› ä¸º `nums[mid]` å’Œ `target` å±äºåŒä¸€æ•°ç»„ï¼Œ`target` æ›´é å³ï¼Œå°±æ›´å¤§ã€‚
      3. å¦‚æœ `target` è½åœ¨äº† `3` åŒºï¼šåˆ™ `nums[mid] > target`ã€‚å› ä¸º `nums[mid]` å±äºè“è‰²æ•°ç»„ï¼Œ`target` å±äºé»„è‰²æ•°ç»„ï¼Œå¹¶ä¸” `æ‰€æœ‰è“è‰²æ•°ç»„çš„å…ƒç´  > æ‰€æœ‰é»„è‰²æ•°ç»„çš„å…ƒç´ `ã€‚
   2. å½“æ—‹è½¬ç‚¹é å·¦æ—¶ï¼šï¼ˆ`target` å¯è½åœ¨ â‘£~â‘¥ï¼‰
      1. å¦‚æœ `target` è½åœ¨äº† `4` åŒºï¼šåˆ™ `nums[mid] < target`ã€‚å› ä¸º `nums[mid]` å±äºé»„è‰²æ•°ç»„ï¼Œ`target` å±äºè“è‰²æ•°ç»„ï¼Œå¹¶ä¸” `æ‰€æœ‰é»„è‰²æ•°ç»„çš„å…ƒç´  > æ‰€æœ‰è“è‰²æ•°ç»„çš„å…ƒç´ `ã€‚
      2. å¦‚æœ `target` è½åœ¨äº† `5` åŒºï¼šåˆ™ `nums[mid] > target`ã€‚å› ä¸º `nums[mid]` å’Œ `target` å±äºåŒä¸€æ•°ç»„ï¼Œ`target` æ›´é å·¦ï¼Œå°±æ›´å°ã€‚
      3. å¦‚æœ `target` è½åœ¨äº† `6` åŒºï¼šåˆ™ `nums[mid] < target`ã€‚å› ä¸º `nums[mid]` å’Œ `target` å±äºåŒä¸€æ•°ç»„ï¼Œ`target` æ›´é å³ï¼Œå°±æ›´å¤§ã€‚
   ![rotated-array-2]({{ "./assets/images/rotated-array-2.jpeg" | absolute_url }}){:height="75%" :width="75%"}

3. è½¬æ¢ä¸ºä»£ç çš„æ€è·¯ï¼šï¼ˆæŒ‡é’ˆçš„ç§»åŠ¨ï¼‰
   1. å½“æ—‹è½¬ç‚¹é å³æ—¶ï¼Œå¦‚æœ `target` è½åœ¨äº† `1` åŒºï¼Œé‚£ä¹ˆå³æŒ‡é’ˆ **ä¸€å®šä¼šå‘å·¦ç§»åŠ¨**ã€‚åªéœ€åˆ¤æ–­ $target$ æ˜¯å¦å¤„äº $[nums[left], nums[mid]]$ åŒºé—´å†…å³å¯ã€‚
   1. åŒç†ã€‚å½“æ—‹è½¬ç‚¹é å·¦æ—¶ï¼Œå¦‚æœ `target` è½åœ¨äº† `6` åŒºï¼Œé‚£ä¹ˆå·¦æŒ‡é’ˆ **ä¸€å®šä¼šå‘å³ç§»åŠ¨**ã€‚åªéœ€åˆ¤æ–­ $target$ æ˜¯å¦å¤„äº $[nums[mid], nums[right]]$ åŒºé—´å†…å³å¯ã€‚
   ![rotated-array-3]({{ "./assets/images/rotated-array-3.jpeg" | absolute_url }}){:height="75%" :width="75%"}

## ä»£ç  

```python
class Solution:
    def search(self, nums: List[int], target: int) -> int:
        # åˆå§‹åŒ–
        left, right = 0, len(nums)-1

        # ç»ˆæ­¢æ¡ä»¶
        while left <= right:
            mid = (left + right) // 2
            if nums[mid] == target:
                return mid

            # æ—‹è½¬ç‚¹é å³
            if nums[mid] >= nums[left]:
                # target è½åœ¨ 1 åŒº
                if nums[left] <= target <= nums[mid]:
                    right = mid - 1
                else:
                    left = mid + 1

            # æ—‹è½¬ç‚¹é å·¦
            else:
                # target è½åœ¨ 6 åŒº
                if nums[mid] <= target <= nums[right]:
                    left = mid + 1
                else:
                    right = mid - 1

        return -1
```

## åˆ†æ 

ä½¿ç”¨äºŒåˆ†æœç´¢å¯å°†å¤æ‚åº¦é™ä¸º `O(log n)`