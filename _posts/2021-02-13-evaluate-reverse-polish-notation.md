---
layout: single
classes: wide
toc: true
toc_label: "æœ¬æ–‡å†…å®¹"
toc_icon: "list"
sidebar:
  nav: "main"

tags: æ ˆ
title: 150 é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼
---

## é¢˜ç›®

> é¢˜ç›®é“¾æ¥ï¼š[150 é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼](https://leetcode-cn.com/problems/evaluate-reverse-polish-notation/)

æ ¹æ® é€†æ³¢å…°è¡¨ç¤ºæ³•ï¼Œæ±‚è¡¨è¾¾å¼çš„å€¼ã€‚

æœ‰æ•ˆçš„è¿ç®—ç¬¦åŒ…æ‹¬Â +,Â -,Â *,Â /Â ã€‚æ¯ä¸ªè¿ç®—å¯¹è±¡å¯ä»¥æ˜¯æ•´æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯å¦ä¸€ä¸ªé€†æ³¢å…°è¡¨è¾¾å¼ã€‚

è¯´æ˜ï¼š

    æ•´æ•°é™¤æ³•åªä¿ç•™æ•´æ•°éƒ¨åˆ†ã€‚
    ç»™å®šé€†æ³¢å…°è¡¨è¾¾å¼æ€»æ˜¯æœ‰æ•ˆçš„ã€‚æ¢å¥è¯è¯´ï¼Œè¡¨è¾¾å¼æ€»ä¼šå¾—å‡ºæœ‰æ•ˆæ•°å€¼ä¸”ä¸å­˜åœ¨é™¤æ•°ä¸º 0 çš„æƒ…å†µã€‚
Â 

ç¤ºä¾‹Â 1ï¼š

    è¾“å…¥: ["2", "1", "+", "3", "*"]
    è¾“å‡º: 9
    è§£é‡Š: è¯¥ç®—å¼è½¬åŒ–ä¸ºå¸¸è§çš„ä¸­ç¼€ç®—æœ¯è¡¨è¾¾å¼ä¸ºï¼š((2 + 1) * 3) = 9
ç¤ºä¾‹Â 2ï¼š

    è¾“å…¥: ["4", "13", "5", "/", "+"]
    è¾“å‡º: 6
    è§£é‡Š: è¯¥ç®—å¼è½¬åŒ–ä¸ºå¸¸è§çš„ä¸­ç¼€ç®—æœ¯è¡¨è¾¾å¼ä¸ºï¼š(4 + (13 / 5)) = 6
ç¤ºä¾‹Â 3ï¼š

    è¾“å…¥: ["10", "6", "9", "3", "+", "-11", "*", "/", "*", "17", "+", "5", "+"]
    è¾“å‡º: 22
    è§£é‡Š: 
    è¯¥ç®—å¼è½¬åŒ–ä¸ºå¸¸è§çš„ä¸­ç¼€ç®—æœ¯è¡¨è¾¾å¼ä¸ºï¼š
        ((10 * (6 / ((9 + 3) * -11))) + 17) + 5
        = ((10 * (6 / (12 * -11))) + 17) + 5
        = ((10 * (6 / -132)) + 17) + 5
        = ((10 * 0) + 17) + 5
        = (0 + 17) + 5
        = 17 + 5
        = 22
Â 

é€†æ³¢å…°è¡¨è¾¾å¼ï¼š

    é€†æ³¢å…°è¡¨è¾¾å¼æ˜¯ä¸€ç§åç¼€è¡¨è¾¾å¼ï¼Œæ‰€è°“åç¼€å°±æ˜¯æŒ‡ç®—ç¬¦å†™åœ¨åé¢ã€‚
    å¹³å¸¸ä½¿ç”¨çš„ç®—å¼åˆ™æ˜¯ä¸€ç§ä¸­ç¼€è¡¨è¾¾å¼ï¼Œå¦‚ ( 1 + 2 ) * ( 3 + 4 ) ã€‚
    è¯¥ç®—å¼çš„é€†æ³¢å…°è¡¨è¾¾å¼å†™æ³•ä¸º ( ( 1 2 + ) ( 3 4 + ) * ) ã€‚

é€†æ³¢å…°è¡¨è¾¾å¼ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ä¸ªä¼˜ç‚¹ï¼š

    å»æ‰æ‹¬å·åè¡¨è¾¾å¼æ— æ­§ä¹‰ï¼Œä¸Šå¼å³ä¾¿å†™æˆ 1 2 + 3 4 + * ä¹Ÿå¯ä»¥ä¾æ®æ¬¡åºè®¡ç®—å‡ºæ­£ç¡®ç»“æœã€‚
    é€‚åˆç”¨æ ˆæ“ä½œè¿ç®—ï¼šé‡åˆ°æ•°å­—åˆ™å…¥æ ˆï¼›é‡åˆ°ç®—ç¬¦åˆ™å–å‡ºæ ˆé¡¶ä¸¤ä¸ªæ•°å­—è¿›è¡Œè®¡ç®—ï¼Œå¹¶å°†ç»“æœå‹å…¥æ ˆä¸­ã€‚



## æ€è·¯ 

1. ç”±é¢˜æ„å¯ä»¥å¾—åˆ°çš„æ€è·¯ï¼š

   1. å½“é‡åˆ°è¿ç®—ç¬¦æ—¶ï¼Œéœ€è¦å°†è¿ç®—ç¬¦å‰ 2 ä¸ªæ•°å­—ä¸å½“å‰è¿ç®—ç¬¦è¿›è¡Œè®¡ç®—ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªä¸­é—´ç»“æœ

   2. è¿™ä¸ªä¸­é—´ç»“æœä¹Ÿæ˜¯å¯å‚ä¸è®¡ç®—çš„æ•°å­—ï¼Œå› æ­¤ï¼Œéœ€å°†å…¶ä¿å­˜ä¸‹æ¥

2. ç”¨æ ˆçš„å®ç°æ–¹å¼å°±æ˜¯ï¼š
   1. é‡åˆ°è¿ç®—ç¬¦ï¼Œå¼¹å‡ºæ ˆé¡¶çš„ä¸¤ä¸ªå…ƒç´ ï¼Œä¸å½“å‰è¿ç®—ç¬¦åšè¿ç®—ã€‚å¹¶å°†è®¡ç®—ç»“æœå‹å…¥æ ˆ
   2. é‡åˆ°æ‹¬å·ï¼Œç”±é¢˜æ„å¯çŸ¥ï¼Œæœ‰æ— æ‹¬å·ä¸å½±å“è®¡ç®—ç»“æœï¼Œå¯ä»¥ç›´æ¥ `contiue`
   3. é‡åˆ°æ•°å­—ï¼Œå‹å…¥æ ˆ

3. ğŸŒ°ï¼š`["10", "6", "9", "3", "+", "-11", "*", "/", "*", "17", "+", "5", "+"]`

    | stack                      | t     | computing                                              |
    | -------------------------- | ----- | ------------------------------------------------------ |
    | `[]`                       |       |
    | `['10']`                   | `10`  | æ˜¯æ•°å­—ï¼Œç›´æ¥å…¥æ ˆ                                       |
    | `['10', '6']`              | `6`   | åŒä¸Š                                                   |
    | `['10', '6', '9']`         | `9`   | åŒä¸Š                                                   |
    | `['10', '6', '9', '3']`    | `3`   | åŒä¸Š                                                   |
    | `['10', '6', '12']`        | `+`   | æ˜¯è¿ç®—ç¬¦ï¼Œè®¡ç®— `9 + 3 = 12`ï¼Œå°† `12` å‹å…¥æ ˆ            |
    | `['10', '6', '12', '-11']` | `-11` | æ˜¯æ•°å­—ï¼Œç›´æ¥å…¥æ ˆ                                       |
    | `['10', '6', '-132']`      | `*`   | æ˜¯è¿ç®—ç¬¦ï¼Œè®¡ç®— `12 * ï¼ˆ-11ï¼‰ = -132`ï¼Œå°† `-132` å‹å…¥æ ˆ |
    | `['10', '0']`              | `/`   | æ˜¯è¿ç®—ç¬¦ï¼Œè®¡ç®— `6 / ï¼ˆ-132ï¼‰ = 0`ï¼Œå°† `0` å‹å…¥æ ˆ       |
    | `['0']`                    | `*`   | æ˜¯è¿ç®—ç¬¦ï¼Œè®¡ç®— `10 * 0 = 0`ï¼Œå°† `0` å‹å…¥æ ˆ             |
    | `['0', '17']`              | `17`  | æ˜¯æ•°å­—ï¼Œç›´æ¥å…¥æ ˆ                                       |
    | `['17']`                   | `+`   | æ˜¯è¿ç®—ç¬¦ï¼Œè®¡ç®— `0 + 17 = 17`ï¼Œå°† `17` å‹å…¥æ ˆ           |
    | `['17', '5']`              | `5`   | æ˜¯æ•°å­—ï¼Œç›´æ¥å…¥æ ˆ                                       |
    | `['22']`                   | `+`   | æ˜¯è¿ç®—ç¬¦ï¼Œè®¡ç®— `17 + 5 = 22`ï¼Œå°† `22` å‹å…¥æ ˆ           |

## ä»£ç  

```python
class Solution:
    def evalRPN(self, tokens: List[str]) -> int:
        stack = []
        op = {'+', '-', '*', '/'}
        op2 = {'(', ')'}
        res = 0
        for t in tokens:
            # 1. é‡åˆ°è¿ç®—ç¬¦
            if t in op:
                n1 = stack.pop()
                n2 = stack.pop()

                # é™¤æ³•éœ€è¦å•ç‹¬å¤„ç†
                if t == '/':
                    tmp = abs(int(n2) ) // abs(int(n1))
                    # æ±‚å‡º n1 n2 çš„æ­£è´Ÿå·ï¼Œè¿˜è¦æ’é™¤ 0 å¯¹è¯¥æ­¥éª¤çš„å½±å“
                    if int(n2) != 0 and int(n2) * -1 == abs(int(n2)):
                        tmp *= -1
                    if int(n1) != 0 and int(n1) * -1 == abs(int(n1)):
                        tmp *= -1
                    stack.append(str(tmp))
                
                # å…¶ä»–è¿ç®—ç¬¦å¯ç›´æ¥è¿ç®—
                else:
                    stack.append(str(eval(n2 + t + n1)))
            
            # 2. é‡åˆ°æ‹¬å·ï¼Œå¯ä»¥ç›´æ¥è·³è¿‡å·¦å³æ‹¬å·
            elif t in op2:
                continue
            
            # 3. é‡åˆ°æ•°å­—ï¼Œç›´æ¥å°†æ•°å­—å­—ç¬¦å‹å…¥æ ˆ
            else:
                stack.append(t)

        # é˜²æ­¢æœ€åçš„æ ˆé¡¶å…ƒç´ æ˜¯ä¸ªæµ®ç‚¹æ•°
        return int(eval(stack.pop() +  "// 1"))
```

## åˆ†æ 

1. æ—¶é—´å¤æ‚åº¦éœ€è¦ `O(n)`ï¼Œéœ€è¦ä¸€æ¬¡å®Œæ•´çš„çº¿æ€§éå†ã€‚
2. ç©ºé—´å¤æ‚åº¦éœ€è¦ `O(n)`ï¼Œéœ€è¦ä¿å­˜æœªå‚ä¸è®¡ç®—çš„æ•°å­—ã€‚